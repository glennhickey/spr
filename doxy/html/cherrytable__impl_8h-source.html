<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SPR: cherrytable_impl.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>cherrytable_impl.h</h1><a href="cherrytable__impl_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _CHERRYTABLE_IMPL_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _CHERRYTABLE_IMPL_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "<a class="code" href="uptree_8h.html">uptree.h</a>"</span>
00005 <span class="preprocessor">#include "<a class="code" href="brackettable_8h.html">brackettable.h</a>"</span>
00006 
00007 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00008"></a><a class="code" href="classCherryTable.html#a0">00008</a> <a class="code" href="classCherryTable.html#a0">CherryTable&lt;T&gt;::CherryTable</a>() : _size(0), _ntable(NULL)
00009 {
00010 }
00011 
00015 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00016"></a><a class="code" href="classCherryTable.html#a1">00016</a> <a class="code" href="classCherryTable.html#a0">CherryTable&lt;T&gt;::CherryTable</a>(<span class="keywordtype">int</span> size) : _size(size)
00017 {
00018   <a class="code" href="classCherryTable.html#p1">_ntable</a> = (<span class="keywordtype">int</span>*)malloc(size * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00019 }
00020 
00021 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00022"></a><a class="code" href="classCherryTable.html#a2">00022</a> <a class="code" href="classCherryTable.html#a2">CherryTable&lt;T&gt;::~CherryTable</a>()
00023 {
00024   free(<a class="code" href="classCherryTable.html#p1">_ntable</a>);
00025 }
00026 
00030 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00031"></a><a class="code" href="classCherryTable.html#a3">00031</a> <span class="keywordtype">void</span> <a class="code" href="classCherryTable.html#a3">CherryTable&lt;T&gt;::resize</a>(<span class="keywordtype">int</span> size)
00032 {
00033   <span class="keywordflow">if</span> (<a class="code" href="classCherryTable.html#p0">_size</a> == 0)
00034   {
00035     <a class="code" href="classCherryTable.html#p1">_ntable</a> = (<span class="keywordtype">int</span>*)malloc(size * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00036   }
00037   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size &gt; <a class="code" href="classCherryTable.html#p0">_size</a>)
00038   {
00039     <a class="code" href="classCherryTable.html#p1">_ntable</a> = (<span class="keywordtype">int</span>*)realloc(<a class="code" href="classCherryTable.html#p1">_ntable</a>, size * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00040   }
00041   <a class="code" href="classCherryTable.html#p0">_size</a> = size;
00042 }
00043 
00047 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00048"></a><a class="code" href="classCherryTable.html#a5">00048</a> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">int</span>* <a class="code" href="classCherryTable.html#a5">CherryTable&lt;T&gt;::getTable</a>()<span class="keyword"> const</span>
00049 <span class="keyword"></span>{
00050   <span class="keywordflow">return</span> <a class="code" href="classCherryTable.html#p1">_ntable</a>;
00051 }
00052 
00058 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00059"></a><a class="code" href="classCherryTable.html#a6">00059</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCherryTable.html#a6">CherryTable&lt;T&gt;::resetNeighbour</a>(<span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> val)
00060 {
00061   <a class="code" href="classCherryTable.html#p1">_ntable</a>[pos] = val;
00062 }
00063 
00068 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00069"></a><a class="code" href="classCherryTable.html#a7">00069</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classCherryTable.html#a7">CherryTable&lt;T&gt;::operator[]</a>(<span class="keywordtype">int</span> pos)<span class="keyword"> const</span>
00070 <span class="keyword"></span>{
00071   <span class="keywordflow">return</span> <a class="code" href="classCherryTable.html#p1">_ntable</a>[pos];
00072 }
00073 
00082 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00083"></a><a class="code" href="classCherryTable.html#a4">00083</a> <span class="keywordtype">int</span> <a class="code" href="classCherryTable.html#a4">CherryTable&lt;T&gt;::loadTree</a>(<span class="keyword">const</span> <a class="code" href="structUPTree.html">UPTree&lt;T&gt;</a>&amp; tree, <span class="keyword">const</span> <a class="code" href="classBracketTable.html">BracketTable&lt;T&gt;</a>&amp; 
00084                              btable)
00085 {
00086   <span class="keywordtype">int</span> triPos[3];
00087   btable.getTriPos(triPos);
00088 
00089   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classCherryTable.html#p0">_size</a>; ++i)
00090   {
00091     <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = -1;
00092     <span class="keywordflow">if</span> (tree[i].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00093     {
00094       <span class="comment">// Check if left or right neighbour in string is a leaf</span>
00095       <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp; tree[i - 1].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00096       {
00097         <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = i - 1;
00098       }
00099       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt; <a class="code" href="classCherryTable.html#p0">_size</a> - 1 &amp;&amp; tree[i + 1].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00100       {
00101         <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = i + 1;
00102       }
00103 
00104       <span class="comment">// Check if leaf is part of a cherry formed by two different</span>
00105       <span class="comment">// trifurcations</span>
00106       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == triPos[0])
00107       {
00108         <span class="keywordflow">if</span> (tree[triPos[1]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00109         {
00110           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[1];
00111         }
00112         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tree[triPos[2]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00113         {
00114           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[2];
00115         }
00116       }
00117       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == triPos[1])
00118       {
00119         <span class="keywordflow">if</span> (tree[triPos[0]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00120         {
00121           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[0];
00122         }
00123         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tree[triPos[2]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00124         {
00125           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[2];
00126         }
00127       }
00128       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == triPos[2])
00129       {
00130         <span class="keywordflow">if</span> (tree[triPos[0]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00131         {
00132           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[0];
00133         }
00134         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tree[triPos[1]].myType() == <a class="code" href="treetok_8h.html#a4a2">LEAF</a>)
00135         {
00136           <a class="code" href="classCherryTable.html#p1">_ntable</a>[i] = triPos[1];
00137         }
00138       }
00139     }
00140   }
00141   <span class="keywordflow">return</span> 0;
00142 }
00143 
00144 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Oct 2 18:43:17 2006 for SPR by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
