<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SPR: cvector_impl.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>cvector_impl.h</h1><a href="cvector__impl_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00002 
00003 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00004"></a><a class="code" href="classCVector.html#s0">00004</a> <span class="keywordtype">double</span> <a class="code" href="classCVector.html">CVector&lt;T&gt;</a>::_growthFactor = 1.5;
00005 
00006 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00007"></a><a class="code" href="classCVector.html#a0">00007</a> <span class="keyword">inline</span> <a class="code" href="classCVector.html#a0">CVector&lt;T&gt;::CVector</a>() : _array(NULL), _size(0), _cap(0) {}
00008 
00009 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00010"></a><a class="code" href="classCVector.html#a1">00010</a> <span class="keyword">inline</span> <a class="code" href="classCVector.html#a0">CVector&lt;T&gt;::CVector</a>(<span class="keyword">const</span> <a class="code" href="classCVector.html">CVector&lt;T&gt;</a>&amp; v) : _size(v._size), _cap(v._cap)
00011 {
00012   memcpy(<a class="code" href="classCVector.html#p0">_array</a>, v._array, v._size * <span class="keyword">sizeof</span>(T));
00013 }
00014 
00015 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00016"></a><a class="code" href="classCVector.html#a2">00016</a> <span class="keyword">inline</span> <a class="code" href="classCVector.html#a0">CVector&lt;T&gt;::CVector</a>(size_t cap) : _size(0), _cap(cap) 
00017 {
00018   <a class="code" href="classCVector.html#p0">_array</a> = (T*)malloc(cap * <span class="keyword">sizeof</span>(T));
00019 }
00020 
00021 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00022"></a><a class="code" href="classCVector.html#a3">00022</a> <span class="keyword">inline</span> <a class="code" href="classCVector.html#a3">CVector&lt;T&gt;::~CVector</a>() 
00023 {
00024   free(<a class="code" href="classCVector.html#p0">_array</a>);
00025 }
00026 
00027 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00028"></a><a class="code" href="classCVector.html#a4">00028</a> <span class="keyword">inline</span> <a class="code" href="classCVector.html">CVector&lt;T&gt;</a>&amp; <a class="code" href="classCVector.html#a4">CVector&lt;T&gt;::operator=</a>(<span class="keyword">const</span> <a class="code" href="classCVector.html">CVector&lt;T&gt;</a>&amp; v)
00029 {
00030   <a class="code" href="classCVector.html#p1">_size</a> = v.<a class="code" href="classCVector.html#p1">_size</a>;
00031   <a class="code" href="classCVector.html#p2">_cap</a> = v.<a class="code" href="classCVector.html#p2">_cap</a>;
00032   memcpy(<a class="code" href="classCVector.html#p0">_array</a>, v._array, v._size * <span class="keyword">sizeof</span>(T));
00033   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00034 }
00035 
00036 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00037"></a><a class="code" href="classCVector.html#a5">00037</a> <span class="keyword">inline</span> T&amp; <a class="code" href="classCVector.html#a5">CVector&lt;T&gt;::operator[]</a>(size_t pos)
00038 {
00039   assert(pos &lt; <a class="code" href="classCVector.html#p2">_cap</a>);
00040   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p0">_array</a>[pos];
00041 }
00042 
00043 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00044"></a><a class="code" href="classCVector.html#a6">00044</a> <span class="keyword">inline</span> T&amp; <a class="code" href="classCVector.html#a6">CVector&lt;T&gt;::at</a>(size_t pos)
00045 {
00046   assert(pos &lt; <a class="code" href="classCVector.html#p1">_size</a> &amp;&amp; pos &lt; <a class="code" href="classCVector.html#p2">_cap</a>);
00047   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p0">_array</a>[pos];
00048 }
00049 
00050 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00051"></a><a class="code" href="classCVector.html#a7">00051</a> <span class="keyword">inline</span> <span class="keyword">const</span> T&amp; <a class="code" href="classCVector.html#a5">CVector&lt;T&gt;::operator[]</a>(size_t pos)<span class="keyword"> const</span>
00052 <span class="keyword"></span>{
00053   assert(pos &lt; <a class="code" href="classCVector.html#p1">_size</a> &amp;&amp; pos &lt; <a class="code" href="classCVector.html#p2">_cap</a>);
00054   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p0">_array</a>[pos];
00055 }
00056 
00057 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00058"></a><a class="code" href="classCVector.html#a8">00058</a> <span class="keyword">inline</span> <span class="keyword">const</span> T&amp; <a class="code" href="classCVector.html#a6">CVector&lt;T&gt;::at</a>(size_t pos)<span class="keyword"> const</span>
00059 <span class="keyword"></span>{
00060   assert(pos &lt; <a class="code" href="classCVector.html#p1">_size</a> &amp;&amp; pos &lt; <a class="code" href="classCVector.html#p2">_cap</a>);
00061   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p0">_array</a>[pos];
00062 }
00063 
00064 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00065"></a><a class="code" href="classCVector.html#a9">00065</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCVector.html#a9">CVector&lt;T&gt;::push_back</a>(<span class="keyword">const</span> T&amp; elem)
00066 {
00067   <span class="keywordflow">if</span> (<a class="code" href="classCVector.html#p1">_size</a> &gt;= <a class="code" href="classCVector.html#p2">_cap</a>)
00068   {
00069     <a class="code" href="classCVector.html#p2">_cap</a> = std::max(
00070       static_cast&lt;size_t&gt;(static_cast&lt;double&gt;(<a class="code" href="classCVector.html#p2">_cap</a>) * <a class="code" href="classCVector.html#s0">_growthFactor</a>),
00071       <a class="code" href="classCVector.html#p1">_size</a> + 1);
00072     <a class="code" href="classCVector.html#p0">_array</a> = (T*)realloc(<a class="code" href="classCVector.html#p0">_array</a>, _cap * <span class="keyword">sizeof</span>(T));
00073     <span class="keywordflow">if</span> (!<a class="code" href="classCVector.html#p0">_array</a>)
00074       <span class="keywordflow">throw</span> 0;
00075     assert(<a class="code" href="classCVector.html#p1">_size</a> &lt; _cap);
00076   }
00077   <a class="code" href="classCVector.html#p0">_array</a>[<a class="code" href="classCVector.html#p1">_size</a>++] = elem;
00078 }
00079 
00080 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00081"></a><a class="code" href="classCVector.html#a10">00081</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCVector.html#a10">CVector&lt;T&gt;::pop_back</a>()
00082 {
00083   assert(<a class="code" href="classCVector.html#p1">_size</a>);
00084   --<a class="code" href="classCVector.html#p1">_size</a>;
00085 }
00086 
00087 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00088"></a><a class="code" href="classCVector.html#a11">00088</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCVector.html#a11">CVector&lt;T&gt;::reserve</a>(size_t n)
00089 {
00090   <span class="keywordflow">if</span> (n &gt; <a class="code" href="classCVector.html#p2">_cap</a>)
00091   {
00092     <a class="code" href="classCVector.html#p2">_cap</a> = static_cast&lt;size_t&gt;(
00093       static_cast&lt;double&gt;(<a class="code" href="classCVector.html#p2">_cap</a>) * <a class="code" href="classCVector.html#s0">_growthFactor</a>);
00094     <span class="keywordflow">if</span> (n &gt; <a class="code" href="classCVector.html#p2">_cap</a>)
00095       <a class="code" href="classCVector.html#p2">_cap</a> = n;
00096     <a class="code" href="classCVector.html#p0">_array</a> = (T*)realloc(<a class="code" href="classCVector.html#p0">_array</a>, <a class="code" href="classCVector.html#p2">_cap</a> * <span class="keyword">sizeof</span>(T));
00097     <span class="keywordflow">if</span> (!<a class="code" href="classCVector.html#p0">_array</a>)
00098       <span class="keywordflow">throw</span> 0;
00099     assert(<a class="code" href="classCVector.html#p1">_size</a> &lt; <a class="code" href="classCVector.html#p2">_cap</a>);
00100   }
00101 }
00102 
00103 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00104"></a><a class="code" href="classCVector.html#a12">00104</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCVector.html#a12">CVector&lt;T&gt;::clear</a>()
00105 {
00106   <a class="code" href="classCVector.html#p1">_size</a> = 0;
00107 }
00108 
00109 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00110"></a><a class="code" href="classCVector.html#a13">00110</a> <span class="keyword">inline</span> size_t <a class="code" href="classCVector.html#a13">CVector&lt;T&gt;::size</a>()<span class="keyword"> const</span>
00111 <span class="keyword"></span>{
00112   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p1">_size</a>;
00113 }
00114 
00115 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00116"></a><a class="code" href="classCVector.html#a14">00116</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCVector.html#a14">CVector&lt;T&gt;::setSize</a>(size_t size)
00117 {
00118   <span class="keywordflow">if</span> (size &gt; <a class="code" href="classCVector.html#p2">_cap</a>)
00119     <a class="code" href="classCVector.html#a11">reserve</a>(size);
00120   <a class="code" href="classCVector.html#p1">_size</a> = size;
00121 }
00122 
00123 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00124"></a><a class="code" href="classCVector.html#a15">00124</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCVector.html#a15">CVector&lt;T&gt;::empty</a>()<span class="keyword"> const</span>
00125 <span class="keyword"></span>{
00126   <span class="keywordflow">return</span> <a class="code" href="classCVector.html#p1">_size</a> == 0;
00127 }
00128 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Oct 2 18:43:17 2006 for SPR by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
